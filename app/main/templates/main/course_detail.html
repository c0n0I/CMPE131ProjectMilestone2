{% extends "base.html" %}

{% block content %}

<!-- Course Info -->
<div class="card">
    <h1>{{ course.title }}</h1>
    <p>{{ course.description }}</p>
</div>

<!-- Assignments Section -->
<div class="card">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>Assignments</h2>

        {% if current_user.role == "instructor" and course.instructor_id == current_user.id %}
            <div>
                <a class="btn btn-primary"
                   href="{{ url_for('main.new_assignment', course_id=course.id) }}">
                    + Add Assignment
                </a>

                <form method="POST"
                      action="{{ url_for('main.delete_course', course_id=course.id) }}"
                      style="display:inline;">
                    <button class="btn btn-danger"
                            onclick="return confirm('Delete course?')">
                        Delete Course
                    </button>
                </form>
            </div>
        {% endif %}
    </div>

    <hr>

    {% if assignments %}
        <ul>
            {% for assignment in assignments %}
                <li>
                    <strong>{{ assignment.title }}</strong><br>
                    <p>{{ assignment.description }}</p>

                    {% if current_user.role == "instructor" and course.instructor_id == current_user.id %}
                        <form method="POST"
                              action="{{ url_for('main.delete_assignment', assignment_id=assignment.id) }}"
                              style="display:inline;">
                            <button class="btn btn-secondary">
                                Delete Assignment
                            </button>
                        </form>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p><em>No assignments have been posted yet.</em></p>
    {% endif %}
</div>

{% endblock %}
